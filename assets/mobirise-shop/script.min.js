(function(j){if(!j("html").hasClass("is-builder")){var k=function(a){a=j(a).find(".shopItemsModal");j(a).children(".text-modal").empty();j(a).children(".image-modal").empty()},f=function(a){j(a).find(".mbr-gallery-item .item_overlay").on("click",function(n){var o=j(n.target).closest(".mbr-gallery-item");curentItem=o;k(a);n=j(a).find(".shopItemsModal");var m=j(o).find(".sidebar_wraper").clone(),l=j(o).find("img").clone(),o=j(o).find(".onsale").clone();j(n).children(".text-modal").append(m);j(n).children(".image-modal").append(l).append(o);j(a).find(".shopItemsModal_wraper").css("display","flex")});j(a).find(".close-modal-wrapper, .shopItemsModalBg").on("click",function(){j(a).find(".shopItemsModal_wraper").css("display","none");k(a)})},g=function(a,m,n){a=3>m?j(n).find(".shop-items").children().sort(function(r,o){var p=parseFloat(j(r).attr("data-price")),q=parseFloat(j(o).attr("data-price"));return 1==m?p>q?1:p==q?0:-1:p<q?1:p==q?0:-1}):j(n).find(".shop-items").children();j(n).find(".shop-items").children().remove();for(var l=0;l<a.length;l++){j(n).find(".shop-items").append(a[l])}f(n)},e=function(a){var l=0;j(a).find(".mbr-gallery-item").each(function(n,m){parseFloat(j(m).attr("data-price"))>l&&(l=parseFloat(j(m).attr("data-price")))});return l},c=function(a){var l=1000000;j(a).find(".mbr-gallery-item").each(function(n,m){parseFloat(j(m).attr("data-price"))<l&&(l=parseFloat(j(m).attr("data-price")))});return l},i=function(a){var l=j(".min-input").val(),m=j(".max-input").val();j(a).find(".mbr-gallery-item:not(.bestsellers .mbr-gallery-item)").each(function(n,o){parseFloat(j(o).attr("data-price"))>=parseFloat(l)&&parseFloat(j(o).attr("data-price"))<=parseFloat(m)?j(o).removeClass("hided-by-price"):j(o).addClass("hided-by-price")})},h=function(E){var B=j(E).find("input.min-input"),D=j(E).find("input.max-input"),A=j(E).find("div.range-controls"),z=A.find("div.bar"),q=A.find("div.min-toggle"),p=A.find("div.max-toggle"),C=z.innerWidth()-20,y=0,s=C,G=A.offset(),o=G.left,a=B.val(),J=D.val(),I=B.val(),H=D.val(),F=parseInt(j(E).find(".filter-cost").width())-20;q.mousedown(function(){j(document).on("mousemove",function(l){p.css("z-index",0);q.css("z-index",1);togglePos=Math.round(l.pageX-o)-10;y=0>=togglePos?0:togglePos>=C?C:togglePos;q.css({left:function(m,n){if(y<s){return a=y}a=J;return s}});z.css({"margin-left":function(){return y<s?y:s},width:function(){return y<s?C-(y+(C-s)):0}});j(B).val(Math.floor((e(E)-c(E))/F*a)+parseInt(I));i(E)})});p.mousedown(function(){j(document).on("mousemove",function(l){p.css("z-index",1);q.css("z-index",0);togglePos=Math.round(l.pageX-o)-10;s=0>=togglePos?0:togglePos>=C?C:togglePos;p.css({right:function(m,n){if(y<s){return J=s,C-s}J=a;return C-y}});z.css({width:function(){return y<s?C-(y+(C-s)):0}});j(D).val(Math.ceil((e(E)-c(E))/F*J)+parseInt(I));i(E)})});j(document).mouseup(function(){j(document).off("mousemove")});j(window).on("resize",function(){G=A.offset();o=G.left;a=B.val();J=D.val();F=parseInt(j(E).find(".filter-cost").width())-20;var m=A.width()-20,l=(H-I)/m;C=m;y=Math.ceil((a-I)/l);s=Math.ceil((J-I)/l);q.css({left:function(n,r){return y}});p.css({right:function(n,r){return m-s+1}});z.css({"margin-left":function(){return y},width:function(){return s-y}})})},d=function(a){j(a).find("input[name=max]").val(e(a));j(a).find("input[name=min]").val(c(a));"block"==j(a).find(".range-slider").css("display")&&h(a)},b=function(a){var m=j(a);a=j(a).find(".mbr-gallery-filter-all");var n=[];if(m.length){if(m.find(".mbr-gallery-item").each(function(o){(j(this).attr("data-tags")||"").trim().split(",").map(function(p){p=p.trim();-1==j.inArray(p,n)&&n.push(p)})}),0<m.find(".mbr-gallery-filter").length&&m.find(".mbr-gallery-filter").hasClass("gallery-filter-active")){var l="";m.find(".mbr-gallery-filter ul li:not(li:eq(0))").remove();n.map(function(o){l+='<li class="display-7">'+o+"</li>"});m.find(".mbr-gallery-filter ul").append(a).append(l);m.on("click",".mbr-gallery-filter li",function(o){o.preventDefault();$li=j(this);$li.parent().find("li").removeClass("active");$li.addClass("active");var q=$li.closest("section").find(".mbr-gallery-row"),p=$li.html().trim();m.find(".mbr-gallery-item:not(.bestsellers .mbr-gallery-item)").each(function(r,t){var s=j(this);tagsTrimmed=s.attr("data-tags").split(",").map(function(u){return u.trim()});-1!=j.inArray(p,tagsTrimmed)||$li.hasClass("mbr-gallery-filter-all")?s.removeClass("mbr-gallery-item__hided"):(s.addClass("mbr-gallery-item__hided"),setTimeout(function(){s.css("left","300px")},200))});setTimeout(function(){q.closest(".mbr-gallery-row").trigger("filter")},50)})}else{m.find(".mbr-gallery-item__hided").removeClass("mbr-gallery-item__hided"),m.find(".mbr-gallery-row").trigger("filter")}}};j(document).ready(function(){var a=j(".mbr-shop");a&&(j(a).each(function(o,t){j(t).find(".shop-items").children();var r=j(t).find(".shop-items").children(),q=j(t).find(".sort-buttons .filter-by-pu .btn"),p=j(t).find(".sort-buttons .filter-by-pd .btn"),n=j(t).find(".sort-buttons .filter-by-d .btn"),s=j(t).closest("section").attr("data-sortbtn");j(t).find(".filter-by-pu").on("click",function(l){l.preventDefault();l.stopPropagation();j(q).removeClass("disableSortButton "+s+"-outline").addClass(s);j(p).removeClass(s+" "+s+"-outline").addClass(s+"-outline disableSortButton");j(n).removeClass(s+" "+s+"-outline").addClass(s+"-outline disableSortButton");g(r,1,t)});j(t).find(".filter-by-pd").on("click",function(l){l.preventDefault();l.stopPropagation();j(p).removeClass("disableSortButton btn-primary-outline").addClass(s);j(q).removeClass(s+" "+s+"-outline").addClass(s+"-outline disableSortButton");j(n).removeClass(s+" "+s+"-outline").addClass(s+"-outline disableSortButton");g(r,2,t)});j(t).find(".filter-by-d").on("click",function(l){l.preventDefault();l.stopPropagation();j(n).removeClass("disableSortButton "+s+"-outline").addClass(s);j(q).removeClass(s+" "+s+"-outline").addClass(s+"-outline disableSortButton");j(p).removeClass(s+" "+s+"-outline").addClass(s+"-outline disableSortButton");g(r,3,t)});j(t).find(".price-range").on("click",function(l){l.preventDefault();var u=j(t).find(".min-input").val(),m=j(t).find(".max-input").val();j(t).find(".mbr-gallery-item:not(.bestsellers .mbr-gallery-item)").each(function(v,w){parseFloat(j(w).attr("data-price"))>=parseFloat(u)&&parseFloat(j(w).attr("data-price"))<=parseFloat(m)?j(w).removeClass("hided-by-price"):j(w).addClass("hided-by-price")})});j(t).find(".price-range-reset").on("click",function(l){l.preventDefault();j(t).find(".max-input").val(e(t));j(t).find(".min-input").val(c(t));j(t).find(".max-toggle").css("right","0");j(t).find(".min-toggle").css("left","0");j(t).find(".range-controls .bar").css("margin-left","0px").css("width","100%");h(t);j(t).find(".mbr-gallery-item:not(.bestsellers .mbr-gallery-item)").each(function(m,u){j(u).removeClass("hided-by-price")})});d(t);b(t);g(j(t).find(".shop-items").children(),3,t)}),0!=j(".mbr-shop").length&&(null!==navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(Android)|(PlayBook)|(BB10)|(BlackBerry)|(Opera Mini)|(IEMobile)|(webOS)|(MeeGo)/i)||void 0!==document.createTouch||"ontouchstart" in window||"onmsgesturechange" in window||navigator.msMaxTouchPoints?(j(".range-controls").css("display","none"),j(".price-controls, .filter-cost").css("margin-bottom","15px")):(j("input.min-input, input.max-input").prop("disabled",!0),j(".filterPriceRange").css("display","none"))))})}})(jQuery);